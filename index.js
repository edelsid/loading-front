(()=>{"use strict";class e{constructor(e,t){this.data=e,this.header=t}create(){const e=document.createElement("li");return e.className="post",e.innerHTML=this.construct(),e}construct(){return`\n      <h2 class="post_name">${this.data}</h2>\n      <div class="post_body">\n         <span class="avatar"></span>\n         <div class="post_desc_body">\n            <span class="line">${this.header}</span>\n         </div>\n      </div>\n      `}}class t{constructor(){this.element=document.createElement("div"),this.element.className="replaced",this.element.innerHTML=t.construct()}static construct(){return'\n      <text class="warning">Не удалось загрузить данные. Проверьте подключение и обновите страницу.</text>\n      '}}const n=document.querySelector(".main_area");new class{constructor(e,t){this.bindToDOM(e),this.url=t}bindToDOM(e){if(!(e instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=e,this.reload=document.querySelector(".reload"),this.news=document.querySelector(".news_list")}init(){this.onClick=this.onClick.bind(this),this.reload.addEventListener("click",this.onClick),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("./service-worker.js",{scope:"./"}).then((()=>{console.log("registration complete.")})).catch((e=>{console.log(`Ошибка: ${e}`)}))}))}onClick(){this.createRequest()}async createRequest(){try{const t=await fetch(`${this.url}/news`,{method:"GET"});try{const n=await t.json();for(;this.news.firstChild;)this.news.removeChild(this.news.lastChild);n.forEach((t=>{const n=new e(t.date,t.header).create();this.news.appendChild(n)}))}catch(e){this.warning()}}catch(e){this.warning()}}warning(){this.container.innerHTML="";const e=new t;this.container.appendChild(e.element)}}(n,"https://loading-zze8.onrender.com").init()})();